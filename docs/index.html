<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title data-msg="pageTitle">character.onnx Web Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./style.css" />
  <!-- ONNX Runtime Web-->
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.23.2/dist/ort.webgpu.min.js"></script>
  <!-- HEIF/HEIC decode / heic2any (WASM) -->
  <script src="https://cdn.jsdelivr.net/npm/heic2any/dist/heic2any.min.js"></script>
  <!-- HEIF/HEIC fallback / libheif-js -->
  <script src="https://cdn.jsdelivr.net/npm/libheif-js@1.19.8/libheif-wasm/libheif-bundle.js"></script>
</head>
<body>
  <header>
    <h1 data-msg="pageTitle">character.onnx Web Demo</h1>
    <p data-msg="headerDescription">Drag & drop an image to run inference in the browser (WebGPU / WASM) and display bboxes with confidence scores.</p>
  </header>

  <main>
    <section class="panel">
      <div id="status" data-msg="loadingModel">Loading model...</div>
      <div id="drop-zone" class="drop-zone">
        <p data-msg="dropzoneLabel">Drag & drop image here<br>or click to select file</p>
        <input id="file-input" type="file" accept="image/*" />
      </div>
      <div class="controls">
        <label>
          <span data-msg="scoreThresholdLabel">Score Threshold</span>
          <input id="score-thr" type="number" step="0.05" min="0" max="1" value="0.5" />
        </label>
        <label>
          <span data-msg="nmsThresholdLabel">NMS IoU Threshold</span>
          <input id="nms-thr" type="number" step="0.05" min="0" max="1" value="0.45" />
        </label>
      </div>
      <div id="info" class="info"></div>
    </section>

    <section class="canvas-panel">
      <canvas id="canvas"></canvas>
    </section>
  </main>

  <footer>
    <p data-msg="footerNote">All processing runs client-side; your images are never uploaded.<br><a href="https://x.com/ksasao">@ksasao</a> / <a href="https://github.com/ksasao/anime-character-detector">GitHub</a></p>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
